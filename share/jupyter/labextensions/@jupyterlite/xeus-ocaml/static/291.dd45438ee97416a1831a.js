"use strict";(self.webpackChunk_jupyterlite_xeus_ocaml=self.webpackChunk_jupyterlite_xeus_ocaml||[]).push([[291],{291:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var o=n(219),s=n(722),c=n(890),r=n(417),i=n(712),a=n(602);const l={id:"jupyterlab-commands-executor:plugin",description:"A multi-purpose JupyterLab kernel interaction extension.",autoStart:!0,requires:[s.INotebookTracker,c.IInspector,r.IRenderMimeRegistry,o.ILabShell,i.ICompletionProviderManager],activate:(e,t,n,o,s,c)=>{(function(e,t,n,o){let s=null,c=!1;const i={inspected:null,cleared:null,disposed:null,isDisposed:!1,standby:!1,onEditorChange:()=>{}};i.inspected=new a.Signal(i),i.cleared=new a.Signal(i),i.disposed=new a.Signal(i),e.commands.addCommand("inspector:show-custom-help",{label:"Show Custom Help in Inspector",execute:async e=>{const o=e.data;o&&await async function(e){c||(s=t.source),c=!0,t.source=i;const o=new r.MimeModel({data:e}),a=n.preferredMimeType(e,"any");if(!a)return;const l=n.createRenderer(a);await l.renderModel(o),i.inspected.emit({content:l})}(o)}}),o.activeChanged.connect(()=>{c&&s&&(t.source=s,s=null,c=!1)})})(e,n,o,s),function(e,t){const n=new Set,o=t=>{n.has(t.id)||(t.registerCommTarget("jupyterlab-commands-executor",(t,n)=>{const o=n.content.data,{command:s,args:c}=o;s?e.commands.execute(s,c||{}).finally(()=>{t.close()}):t.close()}),n.add(t.id),t.disposed.connect(()=>{n.delete(t.id)}))};t.widgetAdded.connect((e,t)=>{(e=>{e.sessionContext.ready.then(()=>{const t=e.sessionContext.session?.kernel;t&&o(t)}),e.sessionContext.kernelChanged.connect((e,t)=>{t.newValue&&o(t.newValue)})})(t)})}(e,t),function(e){document.addEventListener("keydown",t=>{if(t.shiftKey&&"Tab"===t.key){const t=e.currentWidget;if(!t)return;const n=t.content.activeCell;if(!(n&&n.editor&&n.editor.host.contains(document.activeElement)))return;const o=t.sessionContext.session?.kernel;if(o){const e=o.createComm("tooltip-comm-target");e.open({}),e.close()}}},!0)}(t),e.started.then(()=>{!function(){const e=i.CompleterModel.prototype.resolveItem;i.CompleterModel.prototype.resolveItem=function(t){let n,o;if("number"==typeof t){const e=this.completionItems();if(!e||!e[t])return;n=e[t]}else n=t;const s=this._processedToOriginalItem;if(o=s?s.get(n):n,!o)return;const c=o.resolve,r=e.call(this,t);return r&&c&&r.then(e=>{e&&o&&!o.resolve&&(o.resolve=c)}).catch(()=>{o&&!o.resolve&&(o.resolve=c)}),r}}()})}}}}]);